# Async FastAPI Template

A modern, production-ready template for building asynchronous FastAPI services with SQLAlchemy, Alembic migrations, Pydantic settings, and a robust testing setup.

---

## ğŸ“ Folder Structure

```
fastapi_async/
â”‚
â”œâ”€â”€ alembic/                # Alembic migration scripts and env config
â”‚   â””â”€â”€ versions/           # Auto-generated migration files
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                # API routers/endpoints (e.g., users)
â”‚   â”‚   â””â”€â”€ routes/         # Route modules for each resource
â”‚   â”œâ”€â”€ core/               # Core utilities (config, logging, etc.)
â”‚   â”‚   â”œâ”€â”€ config.py       # Pydantic-based app settings and DB URL assembly
â”‚   â”‚   â””â”€â”€ logger.py       # Logging configuration for the app
â”‚   â”œâ”€â”€ db/                 # Database models, session, and base
â”‚   â”œâ”€â”€ main.py             # FastAPI app instance and startup logic
â”‚   â””â”€â”€ ...                 # (Other modules: schemas, services, etc.)
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ dev.env             # Environment variables for local development
â”‚
â”œâ”€â”€ tests/                  # All test code
â”‚   â”œâ”€â”€ conftest.py         # Pytest fixtures (test client, DB setup/teardown)
â”‚   â””â”€â”€ test_users.py       # Example test cases for user endpoints
â”‚
â”œâ”€â”€ requirements.txt        # Python dependencies
â”œâ”€â”€ README.md               # Project documentation (this file)
â””â”€â”€ ...
```

---

## ğŸ“¦ Module Importance

- **alembic/**  
  Handles all database schema migrations. The `versions/` folder contains migration scripts generated by Alembic.  
  *Why?* Ensures your database schema stays in sync with your models across all environments.

- **app/core/config.py**  
  Centralizes configuration using Pydantic. Loads environment variables, assembles async/sync DB URLs, and provides a single source of truth for app settings.  
  *Why?* Keeps configuration DRY, secure, and easy to manage.

- **app/core/logger.py**  
  Sets up structured logging for the entire application.  
  *Why?* Ensures consistent and informative logs for debugging and monitoring.

- **app/main.py**  
  The entry point for your FastAPI application.  
  *Why?* Defines the app instance, includes routers, and sets up middleware/events.

- **app/api/routes/**  
  Contains APIRouter modules for each resource (e.g., users).  
  *Why?* Keeps endpoints modular and organized.

- **app/db/**  
  Contains SQLAlchemy models, session management, and base class.  
  *Why?* Keeps all DB logic organized and reusable.

- **config/dev.env**  
  Stores environment variables for local development.  
  *Why?* Keeps secrets/config out of code and easy to change per environment.

- **tests/**  
  All test code lives here. `conftest.py` provides fixtures for test DB and client.  
  *Why?* Ensures your app is reliable and changes are safe.

- **requirements.txt**  
  Lists all dependencies for reproducible environments.

---

## ğŸš€ Getting Started

1. **Install dependencies**
   ```sh
   pip install -r requirements.txt
   ```

2. **Set up environment variables**
   - Copy `config/dev.env` to `.env` or use as is for local dev.

3. **Run database migrations**
   ```sh
   alembic upgrade head
   ```

4. **Start the app**
   ```sh
   uvicorn app.main:app --reload
   ```

5. **Run tests**
   ```sh
   pytest
   ```
